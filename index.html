<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Калькулятор майнинга биткойна</title>
    <style>
    </style>
</head>
<body>
    <script>
        async function calculateMiningProfitability(hashrateThs, powerConsumptionWatt, poolFeePercent, electricityCostUsdPerKwh) {
            console.log(hashrateThs, powerConsumptionWatt, poolFeePercent, electricityCostUsdPerKwh)
            // Константы
            const coinsArray = await fetch('https://api.minerstat.com/v2/coins?list=BTC').then(r => r.json());
            const BTCdata = coinsArray.find(x => x.coin == 'BTC');
            // console.log(BTCdata)
            const btcPerBlock = BTCdata.reward_block;  // Вознаграждение за блок в BTC
            const blocksPerDay = 144;  // Среднее количество блоков в день
            const btcPriceUsd = BTCdata.price;  // Текущая цена BTC в USD
            const networkHashratehs = BTCdata.network_hashrate//620355217.981;  // Текущий хешрейт сети в TH/s
            const networkHashrateThs = networkHashratehs / 1e12;
            // Расчеты
            const dailyBtcEarned = (hashrateThs / networkHashrateThs) * blocksPerDay * btcPerBlock;
            const dailyRevenueUsd = dailyBtcEarned * btcPriceUsd;
            const dailyPowerCostUsd = (powerConsumptionWatt / 1000) * 24 * electricityCostUsdPerKwh;
            const dailyPoolFeeUsd = dailyRevenueUsd * (poolFeePercent / 100);
            const dailyProfitUsd = dailyRevenueUsd - dailyPowerCostUsd - dailyPoolFeeUsd;

            console.log(dailyRevenueUsd, dailyPowerCostUsd, dailyProfitUsd);
        }

        const hashrateThs = 200;
        const powerConsumptionWatt = 100;
        const poolFeePercent = 0;
        const electricityCostUsdPerKwh = 0.1;

// Расчет прибыли
        calculateMiningProfitability(hashrateThs, powerConsumptionWatt, poolFeePercent, electricityCostUsdPerKwh);
// console.log(`Ежедневная прибыль: $${dailyProfit.toFixed(4)} USD`);
    </script>
</body>
</html>
